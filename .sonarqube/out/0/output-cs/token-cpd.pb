ò
kD:\almacenamiento\Clases ESPE\Semestre 6\2534-PRUEBAS DE SOFTWARE\C#\ReservasHotel\ReservasHotel\Program.cs
	DotNetEnv 	
.	 

Env
 
. 
Load 
( 
$str 
) 
; 
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
var 
connectionString 
= 
Environment "
." #"
GetEnvironmentVariable# 9
(9 :
$str: M
)M N
??O Q
throwR W
newX [%
InvalidOperationException\ u
(u v
$str	v î
)
î ï
;
ï ñ
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
connectionString )
)) *
)* +
;+ ,
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
await!! 
app!! 	
.!!	 

RunAsync!!
 
(!! 
)!! 
;!! ı€
ÉD:\almacenamiento\Clases ESPE\Semestre 6\2534-PRUEBAS DE SOFTWARE\C#\ReservasHotel\ReservasHotel\Migrations\20250121123131_Model.cs
	namespace 	
ReservasHotel
 
. 

Migrations "
{ 
public		 

partial		 
class		 
Model		 
:		  
	Migration		! *
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 6
,6 7
table 
: 
$str !
)! "
;" #
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str =
,= >
table 
: 
$str !
)! "
;" #
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str B
,B C
table 
: 
$str -
)- .
;. /
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str !
,! "
table 
: 
$str !
,! "
newName 
: 
$str $
)$ %
;% &
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name   
:   
$str   !
,  ! "
table!! 
:!! 
$str!! -
,!!- .
type"" 
:"" 
$str"" 
,"" 
nullable## 
:## 
false## 
,##  
defaultValue$$ 
:$$ 
$num$$ 
,$$  

oldClrType%% 
:%% 
typeof%% "
(%%" #
int%%# &
)%%& '
,%%' (
oldType&& 
:&& 
$str&& 
,&& 
oldNullable'' 
:'' 
true'' !
)''! "
;''" #
migrationBuilder)) 
.)) 
AlterColumn)) (
<))( )
string))) /
>))/ 0
())0 1
name** 
:** 
$str** #
,**# $
table++ 
:++ 
$str++ -
,++- .
type,, 
:,, 
$str,, %
,,,% &
	maxLength-- 
:-- 
$num-- 
,-- 
nullable.. 
:.. 
false.. 
,..  
defaultValue// 
:// 
$str//  
,//  !

oldClrType00 
:00 
typeof00 "
(00" #
string00# )
)00) *
,00* +
oldType11 
:11 
$str11 (
,11( )
oldNullable22 
:22 
true22 !
)22! "
;22" #
migrationBuilder44 
.44 
AlterColumn44 (
<44( )
decimal44) 0
>440 1
(441 2
name55 
:55 
$str55 
,55 
table66 
:66 
$str66 -
,66- .
type77 
:77 
$str77 %
,77% &
	precision88 
:88 
$num88 
,88 
scale99 
:99 
$num99 
,99 
nullable:: 
::: 
false:: 
,::  
defaultValue;; 
:;; 
$num;;  
,;;  !

oldClrType<< 
:<< 
typeof<< "
(<<" #
decimal<<# *
)<<* +
,<<+ ,
oldType== 
:== 
$str== (
,==( )
oldPrecision>> 
:>> 
$num>>  
,>>  !
oldScale?? 
:?? 
$num?? 
,?? 
oldNullable@@ 
:@@ 
true@@ !
)@@! "
;@@" #
migrationBuilderBB 
.BB 
AlterColumnBB (
<BB( )
intBB) ,
>BB, -
(BB- .
nameCC 
:CC 
$strCC $
,CC$ %
tableDD 
:DD 
$strDD !
,DD! "
typeEE 
:EE 
$strEE 
,EE 
nullableFF 
:FF 
falseFF 
,FF  
defaultValueGG 
:GG 
$numGG 
,GG  

oldClrTypeHH 
:HH 
typeofHH "
(HH" #
intHH# &
)HH& '
,HH' (
oldTypeII 
:II 
$strII 
,II 
oldNullableJJ 
:JJ 
trueJJ !
)JJ! "
;JJ" #
migrationBuilderLL 
.LL 
AlterColumnLL (
<LL( )
intLL) ,
>LL, -
(LL- .
nameMM 
:MM 
$strMM !
,MM! "
tableNN 
:NN 
$strNN !
,NN! "
typeOO 
:OO 
$strOO 
,OO 
nullablePP 
:PP 
falsePP 
,PP  
defaultValueQQ 
:QQ 
$numQQ 
,QQ  

oldClrTypeRR 
:RR 
typeofRR "
(RR" #
intRR# &
)RR& '
,RR' (
oldTypeSS 
:SS 
$strSS 
,SS 
oldNullableTT 
:TT 
trueTT !
)TT! "
;TT" #
migrationBuilderVV 
.VV 
AlterColumnVV (
<VV( )
DateTimeVV) 1
>VV1 2
(VV2 3
nameWW 
:WW 
$strWW #
,WW# $
tableXX 
:XX 
$strXX !
,XX! "
typeYY 
:YY 
$strYY !
,YY! "
nullableZZ 
:ZZ 
falseZZ 
,ZZ  
defaultValue[[ 
:[[ 
new[[ !
DateTime[[" *
([[* +
$num[[+ ,
,[[, -
$num[[. /
,[[/ 0
$num[[1 2
,[[2 3
$num[[4 5
,[[5 6
$num[[7 8
,[[8 9
$num[[: ;
,[[; <
$num[[= >
,[[> ?
DateTimeKind[[@ L
.[[L M
Unspecified[[M X
)[[X Y
,[[Y Z

oldClrType\\ 
:\\ 
typeof\\ "
(\\" #
DateTime\\# +
)\\+ ,
,\\, -
oldType]] 
:]] 
$str]] $
,]]$ %
oldNullable^^ 
:^^ 
true^^ !
)^^! "
;^^" #
migrationBuilder`` 
.`` 
AlterColumn`` (
<``( )
DateTime``) 1
>``1 2
(``2 3
nameaa 
:aa 
$straa  
,aa  !
tablebb 
:bb 
$strbb !
,bb! "
typecc 
:cc 
$strcc !
,cc! "
nullabledd 
:dd 
falsedd 
,dd  
defaultValueee 
:ee 
newee !
DateTimeee" *
(ee* +
$numee+ ,
,ee, -
$numee. /
,ee/ 0
$numee1 2
,ee2 3
$numee4 5
,ee5 6
$numee7 8
,ee8 9
$numee: ;
,ee; <
$numee= >
,ee> ?
DateTimeKindee@ L
.eeL M
UnspecifiedeeM X
)eeX Y
,eeY Z

oldClrTypeff 
:ff 
typeofff "
(ff" #
DateTimeff# +
)ff+ ,
,ff, -
oldTypegg 
:gg 
$strgg $
,gg$ %
oldNullablehh 
:hh 
truehh !
)hh! "
;hh" #
migrationBuilderjj 
.jj 
AlterColumnjj (
<jj( )
decimaljj) 0
>jj0 1
(jj1 2
namekk 
:kk 
$strkk 
,kk 
tablell 
:ll 
$strll !
,ll! "
typemm 
:mm 
$strmm %
,mm% &
	precisionnn 
:nn 
$numnn 
,nn 
scaleoo 
:oo 
$numoo 
,oo 
nullablepp 
:pp 
falsepp 
,pp  
defaultValueqq 
:qq 
$numqq  
,qq  !

oldClrTyperr 
:rr 
typeofrr "
(rr" #
decimalrr# *
)rr* +
,rr+ ,
oldTypess 
:ss 
$strss (
,ss( )
oldPrecisiontt 
:tt 
$numtt  
,tt  !
oldScaleuu 
:uu 
$numuu 
,uu 
oldNullablevv 
:vv 
truevv !
)vv! "
;vv" #
migrationBuilderxx 
.xx 
AlterColumnxx (
<xx( )
stringxx) /
>xx/ 0
(xx0 1
nameyy 
:yy 
$stryy 
,yy 
tablezz 
:zz 
$strzz %
,zz% &
type{{ 
:{{ 
$str{{ $
,{{$ %
	maxLength|| 
:|| 
$num|| 
,|| 
nullable}} 
:}} 
false}} 
,}}  
defaultValue~~ 
:~~ 
$str~~  
,~~  !

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType
ÄÄ 
:
ÄÄ 
$str
ÄÄ (
,
ÄÄ( )
oldNullable
ÅÅ 
:
ÅÅ 
true
ÅÅ !
)
ÅÅ! "
;
ÅÅ" #
migrationBuilder
ÉÉ 
.
ÉÉ 
AlterColumn
ÉÉ (
<
ÉÉ( )
bool
ÉÉ) -
>
ÉÉ- .
(
ÉÉ. /
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ "
,
ÑÑ" #
table
ÖÖ 
:
ÖÖ 
$str
ÖÖ %
,
ÖÖ% &
type
ÜÜ 
:
ÜÜ 
$str
ÜÜ 
,
ÜÜ 
nullable
áá 
:
áá 
false
áá 
,
áá  
defaultValue
àà 
:
àà 
false
àà #
,
àà# $

oldClrType
ââ 
:
ââ 
typeof
ââ "
(
ââ" #
bool
ââ# '
)
ââ' (
,
ââ( )
oldType
ää 
:
ää 
$str
ää 
,
ää 
oldNullable
ãã 
:
ãã 
true
ãã !
)
ãã! "
;
ãã" #
migrationBuilder
çç 
.
çç 
AlterColumn
çç (
<
çç( )
string
çç) /
>
çç/ 0
(
çç0 1
name
éé 
:
éé 
$str
éé 
,
éé 
table
èè 
:
èè 
$str
èè !
,
èè! "
type
êê 
:
êê 
$str
êê $
,
êê$ %
	maxLength
ëë 
:
ëë 
$num
ëë 
,
ëë 
nullable
íí 
:
íí 
false
íí 
,
íí  
defaultValue
ìì 
:
ìì 
$str
ìì  
,
ìì  !

oldClrType
îî 
:
îî 
typeof
îî "
(
îî" #
string
îî# )
)
îî) *
,
îî* +
oldType
ïï 
:
ïï 
$str
ïï (
,
ïï( )
oldNullable
ññ 
:
ññ 
true
ññ !
)
ññ! "
;
ññ" #
migrationBuilder
òò 
.
òò 
AlterColumn
òò (
<
òò( )
string
òò) /
>
òò/ 0
(
òò0 1
name
ôô 
:
ôô 
$str
ôô 
,
ôô 
table
öö 
:
öö 
$str
öö !
,
öö! "
type
õõ 
:
õõ 
$str
õõ $
,
õõ$ %
	maxLength
úú 
:
úú 
$num
úú 
,
úú 
nullable
ùù 
:
ùù 
false
ùù 
,
ùù  
defaultValue
ûû 
:
ûû 
$str
ûû  
,
ûû  !

oldClrType
üü 
:
üü 
typeof
üü "
(
üü" #
string
üü# )
)
üü) *
,
üü* +
oldType
†† 
:
†† 
$str
†† (
,
††( )
oldNullable
°° 
:
°° 
true
°° !
)
°°! "
;
°°" #
migrationBuilder
££ 
.
££ 
AlterColumn
££ (
<
££( )
string
££) /
>
££/ 0
(
££0 1
name
§§ 
:
§§ 
$str
§§  
,
§§  !
table
•• 
:
•• 
$str
•• !
,
••! "
type
¶¶ 
:
¶¶ 
$str
¶¶ $
,
¶¶$ %
	maxLength
ßß 
:
ßß 
$num
ßß 
,
ßß 
nullable
®® 
:
®® 
false
®® 
,
®®  
defaultValue
©© 
:
©© 
$str
©©  
,
©©  !

oldClrType
™™ 
:
™™ 
typeof
™™ "
(
™™" #
string
™™# )
)
™™) *
,
™™* +
oldType
´´ 
:
´´ 
$str
´´ (
,
´´( )
oldNullable
¨¨ 
:
¨¨ 
true
¨¨ !
)
¨¨! "
;
¨¨" #
migrationBuilder
ÆÆ 
.
ÆÆ 
AddForeignKey
ÆÆ *
(
ÆÆ* +
name
ØØ 
:
ØØ 
$str
ØØ 6
,
ØØ6 7
table
∞∞ 
:
∞∞ 
$str
∞∞ !
,
∞∞! "
column
±± 
:
±± 
$str
±± #
,
±±# $
principalTable
≤≤ 
:
≤≤ 
$str
≤≤  *
,
≤≤* +
principalColumn
≥≥ 
:
≥≥  
$str
≥≥! ,
,
≥≥, -
onDelete
¥¥ 
:
¥¥ 
ReferentialAction
¥¥ +
.
¥¥+ ,
Cascade
¥¥, 3
)
¥¥3 4
;
¥¥4 5
migrationBuilder
∂∂ 
.
∂∂ 
AddForeignKey
∂∂ *
(
∂∂* +
name
∑∑ 
:
∑∑ 
$str
∑∑ =
,
∑∑= >
table
∏∏ 
:
∏∏ 
$str
∏∏ !
,
∏∏! "
column
ππ 
:
ππ 
$str
ππ &
,
ππ& '
principalTable
∫∫ 
:
∫∫ 
$str
∫∫  .
,
∫∫. /
principalColumn
ªª 
:
ªª  
$str
ªª! /
,
ªª/ 0
onDelete
ºº 
:
ºº 
ReferentialAction
ºº +
.
ºº+ ,
Cascade
ºº, 3
)
ºº3 4
;
ºº4 5
migrationBuilder
ææ 
.
ææ 
AddForeignKey
ææ *
(
ææ* +
name
øø 
:
øø 
$str
øø B
,
øøB C
table
¿¿ 
:
¿¿ 
$str
¿¿ -
,
¿¿- .
column
¡¡ 
:
¡¡ 
$str
¡¡ #
,
¡¡# $
principalTable
¬¬ 
:
¬¬ 
$str
¬¬  *
,
¬¬* +
principalColumn
√√ 
:
√√  
$str
√√! ,
,
√√, -
onDelete
ƒƒ 
:
ƒƒ 
ReferentialAction
ƒƒ +
.
ƒƒ+ ,
Cascade
ƒƒ, 3
)
ƒƒ3 4
;
ƒƒ4 5
}
≈≈ 	
	protected
»» 
override
»» 
void
»» 
Down
»»  $
(
»»$ %
MigrationBuilder
»»% 5
migrationBuilder
»»6 F
)
»»F G
{
…… 	
migrationBuilder
   
.
   
DropForeignKey
   +
(
  + ,
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ 6
,
ÀÀ6 7
table
ÃÃ 
:
ÃÃ 
$str
ÃÃ !
)
ÃÃ! "
;
ÃÃ" #
migrationBuilder
ŒŒ 
.
ŒŒ 
DropForeignKey
ŒŒ +
(
ŒŒ+ ,
name
œœ 
:
œœ 
$str
œœ =
,
œœ= >
table
–– 
:
–– 
$str
–– !
)
––! "
;
––" #
migrationBuilder
““ 
.
““ 
DropForeignKey
““ +
(
““+ ,
name
”” 
:
”” 
$str
”” B
,
””B C
table
‘‘ 
:
‘‘ 
$str
‘‘ -
)
‘‘- .
;
‘‘. /
migrationBuilder
÷÷ 
.
÷÷ 
RenameColumn
÷÷ )
(
÷÷) *
name
◊◊ 
:
◊◊ 
$str
◊◊ !
,
◊◊! "
table
ÿÿ 
:
ÿÿ 
$str
ÿÿ !
,
ÿÿ! "
newName
ŸŸ 
:
ŸŸ 
$str
ŸŸ $
)
ŸŸ$ %
;
ŸŸ% &
migrationBuilder
€€ 
.
€€ 
AlterColumn
€€ (
<
€€( )
int
€€) ,
>
€€, -
(
€€- .
name
‹‹ 
:
‹‹ 
$str
‹‹ !
,
‹‹! "
table
›› 
:
›› 
$str
›› -
,
››- .
type
ﬁﬁ 
:
ﬁﬁ 
$str
ﬁﬁ 
,
ﬁﬁ 
nullable
ﬂﬂ 
:
ﬂﬂ 
true
ﬂﬂ 
,
ﬂﬂ 

oldClrType
‡‡ 
:
‡‡ 
typeof
‡‡ "
(
‡‡" #
int
‡‡# &
)
‡‡& '
,
‡‡' (
oldType
·· 
:
·· 
$str
·· 
)
·· 
;
··  
migrationBuilder
„„ 
.
„„ 
AlterColumn
„„ (
<
„„( )
string
„„) /
>
„„/ 0
(
„„0 1
name
‰‰ 
:
‰‰ 
$str
‰‰ #
,
‰‰# $
table
ÂÂ 
:
ÂÂ 
$str
ÂÂ -
,
ÂÂ- .
type
ÊÊ 
:
ÊÊ 
$str
ÊÊ %
,
ÊÊ% &
nullable
ÁÁ 
:
ÁÁ 
true
ÁÁ 
,
ÁÁ 

oldClrType
ËË 
:
ËË 
typeof
ËË "
(
ËË" #
string
ËË# )
)
ËË) *
,
ËË* +
oldType
ÈÈ 
:
ÈÈ 
$str
ÈÈ (
,
ÈÈ( )
oldMaxLength
ÍÍ 
:
ÍÍ 
$num
ÍÍ !
)
ÍÍ! "
;
ÍÍ" #
migrationBuilder
ÏÏ 
.
ÏÏ 
AlterColumn
ÏÏ (
<
ÏÏ( )
decimal
ÏÏ) 0
>
ÏÏ0 1
(
ÏÏ1 2
name
ÌÌ 
:
ÌÌ 
$str
ÌÌ 
,
ÌÌ 
table
ÓÓ 
:
ÓÓ 
$str
ÓÓ -
,
ÓÓ- .
type
ÔÔ 
:
ÔÔ 
$str
ÔÔ %
,
ÔÔ% &
	precision
 
:
 
$num
 
,
 
scale
ÒÒ 
:
ÒÒ 
$num
ÒÒ 
,
ÒÒ 
nullable
ÚÚ 
:
ÚÚ 
true
ÚÚ 
,
ÚÚ 

oldClrType
ÛÛ 
:
ÛÛ 
typeof
ÛÛ "
(
ÛÛ" #
decimal
ÛÛ# *
)
ÛÛ* +
,
ÛÛ+ ,
oldType
ÙÙ 
:
ÙÙ 
$str
ÙÙ (
,
ÙÙ( )
oldPrecision
ıı 
:
ıı 
$num
ıı  
,
ıı  !
oldScale
ˆˆ 
:
ˆˆ 
$num
ˆˆ 
)
ˆˆ 
;
ˆˆ 
migrationBuilder
¯¯ 
.
¯¯ 
AlterColumn
¯¯ (
<
¯¯( )
int
¯¯) ,
>
¯¯, -
(
¯¯- .
name
˘˘ 
:
˘˘ 
$str
˘˘ $
,
˘˘$ %
table
˙˙ 
:
˙˙ 
$str
˙˙ !
,
˙˙! "
type
˚˚ 
:
˚˚ 
$str
˚˚ 
,
˚˚ 
nullable
¸¸ 
:
¸¸ 
true
¸¸ 
,
¸¸ 

oldClrType
˝˝ 
:
˝˝ 
typeof
˝˝ "
(
˝˝" #
int
˝˝# &
)
˝˝& '
,
˝˝' (
oldType
˛˛ 
:
˛˛ 
$str
˛˛ 
)
˛˛ 
;
˛˛  
migrationBuilder
ÄÄ 
.
ÄÄ 
AlterColumn
ÄÄ (
<
ÄÄ( )
int
ÄÄ) ,
>
ÄÄ, -
(
ÄÄ- .
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ !
,
ÅÅ! "
table
ÇÇ 
:
ÇÇ 
$str
ÇÇ !
,
ÇÇ! "
type
ÉÉ 
:
ÉÉ 
$str
ÉÉ 
,
ÉÉ 
nullable
ÑÑ 
:
ÑÑ 
true
ÑÑ 
,
ÑÑ 

oldClrType
ÖÖ 
:
ÖÖ 
typeof
ÖÖ "
(
ÖÖ" #
int
ÖÖ# &
)
ÖÖ& '
,
ÖÖ' (
oldType
ÜÜ 
:
ÜÜ 
$str
ÜÜ 
)
ÜÜ 
;
ÜÜ  
migrationBuilder
àà 
.
àà 
AlterColumn
àà (
<
àà( )
DateTime
àà) 1
>
àà1 2
(
àà2 3
name
ââ 
:
ââ 
$str
ââ #
,
ââ# $
table
ää 
:
ää 
$str
ää !
,
ää! "
type
ãã 
:
ãã 
$str
ãã !
,
ãã! "
nullable
åå 
:
åå 
true
åå 
,
åå 

oldClrType
çç 
:
çç 
typeof
çç "
(
çç" #
DateTime
çç# +
)
çç+ ,
,
çç, -
oldType
éé 
:
éé 
$str
éé $
)
éé$ %
;
éé% &
migrationBuilder
êê 
.
êê 
AlterColumn
êê (
<
êê( )
DateTime
êê) 1
>
êê1 2
(
êê2 3
name
ëë 
:
ëë 
$str
ëë  
,
ëë  !
table
íí 
:
íí 
$str
íí !
,
íí! "
type
ìì 
:
ìì 
$str
ìì !
,
ìì! "
nullable
îî 
:
îî 
true
îî 
,
îî 

oldClrType
ïï 
:
ïï 
typeof
ïï "
(
ïï" #
DateTime
ïï# +
)
ïï+ ,
,
ïï, -
oldType
ññ 
:
ññ 
$str
ññ $
)
ññ$ %
;
ññ% &
migrationBuilder
òò 
.
òò 
AlterColumn
òò (
<
òò( )
decimal
òò) 0
>
òò0 1
(
òò1 2
name
ôô 
:
ôô 
$str
ôô 
,
ôô 
table
öö 
:
öö 
$str
öö !
,
öö! "
type
õõ 
:
õõ 
$str
õõ %
,
õõ% &
	precision
úú 
:
úú 
$num
úú 
,
úú 
scale
ùù 
:
ùù 
$num
ùù 
,
ùù 
nullable
ûû 
:
ûû 
true
ûû 
,
ûû 

oldClrType
üü 
:
üü 
typeof
üü "
(
üü" #
decimal
üü# *
)
üü* +
,
üü+ ,
oldType
†† 
:
†† 
$str
†† (
,
††( )
oldPrecision
°° 
:
°° 
$num
°°  
,
°°  !
oldScale
¢¢ 
:
¢¢ 
$num
¢¢ 
)
¢¢ 
;
¢¢ 
migrationBuilder
§§ 
.
§§ 
AlterColumn
§§ (
<
§§( )
string
§§) /
>
§§/ 0
(
§§0 1
name
•• 
:
•• 
$str
•• 
,
•• 
table
¶¶ 
:
¶¶ 
$str
¶¶ %
,
¶¶% &
type
ßß 
:
ßß 
$str
ßß %
,
ßß% &
nullable
®® 
:
®® 
true
®® 
,
®® 

oldClrType
©© 
:
©© 
typeof
©© "
(
©©" #
string
©©# )
)
©©) *
,
©©* +
oldType
™™ 
:
™™ 
$str
™™ '
,
™™' (
oldMaxLength
´´ 
:
´´ 
$num
´´  
)
´´  !
;
´´! "
migrationBuilder
≠≠ 
.
≠≠ 
AlterColumn
≠≠ (
<
≠≠( )
bool
≠≠) -
>
≠≠- .
(
≠≠. /
name
ÆÆ 
:
ÆÆ 
$str
ÆÆ "
,
ÆÆ" #
table
ØØ 
:
ØØ 
$str
ØØ %
,
ØØ% &
type
∞∞ 
:
∞∞ 
$str
∞∞ 
,
∞∞ 
nullable
±± 
:
±± 
true
±± 
,
±± 

oldClrType
≤≤ 
:
≤≤ 
typeof
≤≤ "
(
≤≤" #
bool
≤≤# '
)
≤≤' (
,
≤≤( )
oldType
≥≥ 
:
≥≥ 
$str
≥≥ 
)
≥≥ 
;
≥≥  
migrationBuilder
µµ 
.
µµ 
AlterColumn
µµ (
<
µµ( )
string
µµ) /
>
µµ/ 0
(
µµ0 1
name
∂∂ 
:
∂∂ 
$str
∂∂ 
,
∂∂ 
table
∑∑ 
:
∑∑ 
$str
∑∑ !
,
∑∑! "
type
∏∏ 
:
∏∏ 
$str
∏∏ %
,
∏∏% &
nullable
ππ 
:
ππ 
true
ππ 
,
ππ 

oldClrType
∫∫ 
:
∫∫ 
typeof
∫∫ "
(
∫∫" #
string
∫∫# )
)
∫∫) *
,
∫∫* +
oldType
ªª 
:
ªª 
$str
ªª '
,
ªª' (
oldMaxLength
ºº 
:
ºº 
$num
ºº  
)
ºº  !
;
ºº! "
migrationBuilder
ææ 
.
ææ 
AlterColumn
ææ (
<
ææ( )
string
ææ) /
>
ææ/ 0
(
ææ0 1
name
øø 
:
øø 
$str
øø 
,
øø 
table
¿¿ 
:
¿¿ 
$str
¿¿ !
,
¿¿! "
type
¡¡ 
:
¡¡ 
$str
¡¡ %
,
¡¡% &
nullable
¬¬ 
:
¬¬ 
true
¬¬ 
,
¬¬ 

oldClrType
√√ 
:
√√ 
typeof
√√ "
(
√√" #
string
√√# )
)
√√) *
,
√√* +
oldType
ƒƒ 
:
ƒƒ 
$str
ƒƒ '
,
ƒƒ' (
oldMaxLength
≈≈ 
:
≈≈ 
$num
≈≈  
)
≈≈  !
;
≈≈! "
migrationBuilder
«« 
.
«« 
AlterColumn
«« (
<
««( )
string
««) /
>
««/ 0
(
««0 1
name
»» 
:
»» 
$str
»»  
,
»»  !
table
…… 
:
…… 
$str
…… !
,
……! "
type
   
:
   
$str
   %
,
  % &
nullable
ÀÀ 
:
ÀÀ 
true
ÀÀ 
,
ÀÀ 

oldClrType
ÃÃ 
:
ÃÃ 
typeof
ÃÃ "
(
ÃÃ" #
string
ÃÃ# )
)
ÃÃ) *
,
ÃÃ* +
oldType
ÕÕ 
:
ÕÕ 
$str
ÕÕ '
,
ÕÕ' (
oldMaxLength
ŒŒ 
:
ŒŒ 
$num
ŒŒ  
)
ŒŒ  !
;
ŒŒ! "
migrationBuilder
–– 
.
–– 
AddForeignKey
–– *
(
––* +
name
—— 
:
—— 
$str
—— 6
,
——6 7
table
““ 
:
““ 
$str
““ !
,
““! "
column
”” 
:
”” 
$str
”” #
,
””# $
principalTable
‘‘ 
:
‘‘ 
$str
‘‘  *
,
‘‘* +
principalColumn
’’ 
:
’’  
$str
’’! ,
)
’’, -
;
’’- .
migrationBuilder
◊◊ 
.
◊◊ 
AddForeignKey
◊◊ *
(
◊◊* +
name
ÿÿ 
:
ÿÿ 
$str
ÿÿ =
,
ÿÿ= >
table
ŸŸ 
:
ŸŸ 
$str
ŸŸ !
,
ŸŸ! "
column
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ &
,
⁄⁄& '
principalTable
€€ 
:
€€ 
$str
€€  .
,
€€. /
principalColumn
‹‹ 
:
‹‹  
$str
‹‹! /
)
‹‹/ 0
;
‹‹0 1
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
AddForeignKey
ﬁﬁ *
(
ﬁﬁ* +
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ B
,
ﬂﬂB C
table
‡‡ 
:
‡‡ 
$str
‡‡ -
,
‡‡- .
column
·· 
:
·· 
$str
·· #
,
··# $
principalTable
‚‚ 
:
‚‚ 
$str
‚‚  *
,
‚‚* +
principalColumn
„„ 
:
„„  
$str
„„! ,
)
„„, -
;
„„- .
}
‰‰ 	
}
ÂÂ 
}ÊÊ ˇ^
äD:\almacenamiento\Clases ESPE\Semestre 6\2534-PRUEBAS DE SOFTWARE\C#\ReservasHotel\ReservasHotel\Migrations\20250116173636_InitalCreate.cs
	namespace 	
ReservasHotel
 
. 

Migrations "
{ 
public		 

partial		 
class		 
InitalCreate		 %
:		& '
	Migration		( 1
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
	IdCLiente 
= 
table  %
.% &
Column& ,
<, -
int- 0
>0 1
(1 2
type2 6
:6 7
$str8 =
,= >
nullable? G
:G H
falseI N
)N O
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
trueS W
)W X
,X Y
Apellido 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
trueU Y
)Y Z
,Z [
CI 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 C
,C D
nullableE M
:M N
trueO S
)S T
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
	IdCLiente; D
)D E
;E F
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str $
,$ %
columns 
: 
table 
=> !
new" %
{   
IdHabitacion!!  
=!!! "
table!!# (
.!!( )
Column!!) /
<!!/ 0
int!!0 3
>!!3 4
(!!4 5
type!!5 9
:!!9 :
$str!!; @
,!!@ A
nullable!!B J
:!!J K
false!!L Q
)!!Q R
."" 

Annotation"" #
(""# $
$str""$ 8
,""8 9
$str"": @
)""@ A
,""A B
Tipo## 
=## 
table##  
.##  !
Column##! '
<##' (
string##( .
>##. /
(##/ 0
type##0 4
:##4 5
$str##6 E
,##E F
nullable##G O
:##O P
true##Q U
)##U V
,##V W

Disponible$$ 
=$$  
table$$! &
.$$& '
Column$$' -
<$$- .
bool$$. 2
>$$2 3
($$3 4
type$$4 8
:$$8 9
$str$$: ?
,$$? @
nullable$$A I
:$$I J
true$$K O
)$$O P
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 6
,((6 7
x((8 9
=>((: <
x((= >
.((> ?
IdHabitacion((? K
)((K L
;((L M
})) 
))) 
;)) 
migrationBuilder++ 
.++ 
CreateTable++ (
(++( )
name,, 
:,, 
$str,,  
,,,  !
columns-- 
:-- 
table-- 
=>-- !
new--" %
{.. 
	IdReserva// 
=// 
table//  %
.//% &
Column//& ,
<//, -
int//- 0
>//0 1
(//1 2
type//2 6
://6 7
$str//8 =
,//= >
nullable//? G
://G H
false//I N
)//N O
.00 

Annotation00 #
(00# $
$str00$ 8
,008 9
$str00: @
)00@ A
,00A B
	IdCliente11 
=11 
table11  %
.11% &
Column11& ,
<11, -
int11- 0
>110 1
(111 2
type112 6
:116 7
$str118 =
,11= >
nullable11? G
:11G H
true11I M
)11M N
,11N O
IdHabitacion22  
=22! "
table22# (
.22( )
Column22) /
<22/ 0
int220 3
>223 4
(224 5
type225 9
:229 :
$str22; @
,22@ A
nullable22B J
:22J K
true22L P
)22P Q
,22Q R
Costo33 
=33 
table33 !
.33! "
Column33" (
<33( )
decimal33) 0
>330 1
(331 2
type332 6
:336 7
$str338 G
,33G H
	precision33I R
:33R S
$num33T V
,33V W
scale33X ]
:33] ^
$num33_ `
,33` a
nullable33b j
:33j k
true33l p
)33p q
,33q r
FechaInicio44 
=44  !
table44" '
.44' (
Column44( .
<44. /
DateTime44/ 7
>447 8
(448 9
type449 =
:44= >
$str44? J
,44J K
nullable44L T
:44T U
true44V Z
)44Z [
,44[ \
FechaFin55 
=55 
table55 $
.55$ %
Column55% +
<55+ ,
DateTime55, 4
>554 5
(555 6
type556 :
:55: ;
$str55< G
,55G H
nullable55I Q
:55Q R
true55S W
)55W X
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% 2
,992 3
x994 5
=>996 8
x999 :
.99: ;
	IdReserva99; D
)99D E
;99E F
table:: 
.:: 

ForeignKey:: $
(::$ %
name;; 
:;; 
$str;; >
,;;> ?
column<< 
:<< 
x<<  !
=><<" $
x<<% &
.<<& '
	IdCliente<<' 0
,<<0 1
principalTable== &
:==& '
$str==( 2
,==2 3
principalColumn>> '
:>>' (
$str>>) 4
)>>4 5
;>>5 6
table?? 
.?? 

ForeignKey?? $
(??$ %
name@@ 
:@@ 
$str@@ E
,@@E F
columnAA 
:AA 
xAA  !
=>AA" $
xAA% &
.AA& '
IdHabitacionAA' 3
,AA3 4
principalTableBB &
:BB& '
$strBB( 6
,BB6 7
principalColumnCC '
:CC' (
$strCC) 7
)CC7 8
;CC8 9
}DD 
)DD 
;DD 
migrationBuilderFF 
.FF 
CreateTableFF (
(FF( )
nameGG 
:GG 
$strGG ,
,GG, -
columnsHH 
:HH 
tableHH 
=>HH !
newHH" %
{II 

IdServicioJJ 
=JJ  
tableJJ! &
.JJ& '
ColumnJJ' -
<JJ- .
intJJ. 1
>JJ1 2
(JJ2 3
typeJJ3 7
:JJ7 8
$strJJ9 >
,JJ> ?
nullableJJ@ H
:JJH I
falseJJJ O
)JJO P
.KK 

AnnotationKK #
(KK# $
$strKK$ 8
,KK8 9
$strKK: @
)KK@ A
,KKA B
DescripcionLL 
=LL  !
tableLL" '
.LL' (
ColumnLL( .
<LL. /
stringLL/ 5
>LL5 6
(LL6 7
typeLL7 ;
:LL; <
$strLL= L
,LLL M
nullableLLN V
:LLV W
trueLLX \
)LL\ ]
,LL] ^
CostoMM 
=MM 
tableMM !
.MM! "
ColumnMM" (
<MM( )
decimalMM) 0
>MM0 1
(MM1 2
typeMM2 6
:MM6 7
$strMM8 G
,MMG H
	precisionMMI R
:MMR S
$numMMT V
,MMV W
scaleMMX ]
:MM] ^
$numMM_ `
,MM` a
nullableMMb j
:MMj k
trueMMl p
)MMp q
,MMq r
	IdReservaNN 
=NN 
tableNN  %
.NN% &
ColumnNN& ,
<NN, -
intNN- 0
>NN0 1
(NN1 2
typeNN2 6
:NN6 7
$strNN8 =
,NN= >
nullableNN? G
:NNG H
trueNNI M
)NNM N
}OO 
,OO 
constraintsPP 
:PP 
tablePP "
=>PP# %
{QQ 
tableRR 
.RR 

PrimaryKeyRR $
(RR$ %
$strRR% >
,RR> ?
xRR@ A
=>RRB D
xRRE F
.RRF G

IdServicioRRG Q
)RRQ R
;RRR S
tableSS 
.SS 

ForeignKeySS $
(SS$ %
nameTT 
:TT 
$strTT J
,TTJ K
columnUU 
:UU 
xUU  !
=>UU" $
xUU% &
.UU& '
	IdReservaUU' 0
,UU0 1
principalTableVV &
:VV& '
$strVV( 2
,VV2 3
principalColumnWW '
:WW' (
$strWW) 4
)WW4 5
;WW5 6
}XX 
)XX 
;XX 
migrationBuilderZZ 
.ZZ 
CreateIndexZZ (
(ZZ( )
name[[ 
:[[ 
$str[[ -
,[[- .
table\\ 
:\\ 
$str\\ !
,\\! "
column]] 
:]] 
$str]] #
)]]# $
;]]$ %
migrationBuilder__ 
.__ 
CreateIndex__ (
(__( )
name`` 
:`` 
$str`` 0
,``0 1
tableaa 
:aa 
$straa !
,aa! "
columnbb 
:bb 
$strbb &
)bb& '
;bb' (
migrationBuilderdd 
.dd 
CreateIndexdd (
(dd( )
nameee 
:ee 
$stree 9
,ee9 :
tableff 
:ff 
$strff -
,ff- .
columngg 
:gg 
$strgg #
)gg# $
;gg$ %
}hh 	
	protectedkk 
overridekk 
voidkk 
Downkk  $
(kk$ %
MigrationBuilderkk% 5
migrationBuilderkk6 F
)kkF G
{ll 	
migrationBuildermm 
.mm 
	DropTablemm &
(mm& '
namenn 
:nn 
$strnn ,
)nn, -
;nn- .
migrationBuilderpp 
.pp 
	DropTablepp &
(pp& '
nameqq 
:qq 
$strqq  
)qq  !
;qq! "
migrationBuilderss 
.ss 
	DropTabless &
(ss& '
namett 
:tt 
$strtt  
)tt  !
;tt! "
migrationBuildervv 
.vv 
	DropTablevv &
(vv& '
nameww 
:ww 
$strww $
)ww$ %
;ww% &
}xx 	
}yy 
}zz •ß
áD:\almacenamiento\Clases ESPE\Semestre 6\2534-PRUEBAS DE SOFTWARE\C#\ReservasHotel\ReservasHotel\Controllers\ReservasHotelController.cs
	namespace 	
ReservasHotel
 
. 
Controllers #
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
ServicioController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
AppDBContext %
_appDBcontext& 3
;3 4
public 
ServicioController !
(! "
AppDBContext" .
appDBcontext/ ;
); <
{ 	
_appDBcontext 
= 
appDBcontext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetServicios) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 
_appDBcontext )
.) * 
ServiciosAdicionales* >
.> ?
ToListAsync? J
(J K
)K L
)L M
;M N
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetServicio) 4
(4 5
int5 8
id9 ;
); <
{ 	
var 
servicio 
= 
await  
_appDBcontext! .
.. / 
ServiciosAdicionales/ C
.C D
	FindAsyncD M
(M N
idN P
)P Q
;Q R
if   
(   
servicio   
==   
null    
)    !
return  " (
NotFound  ) 1
(  1 2
$str  2 U
)  U V
;  V W
return"" 
Ok"" 
("" 
servicio"" 
)"" 
;""  
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
CreateServicio&&) 7
(&&7 8
ServicioAdicional&&8 I
servicio&&J R
)&&R S
{'' 	
if(( 
((( 
!(( 

ModelState(( 
.(( 
IsValid(( #
)((# $
return((% +

BadRequest((, 6
(((6 7

ModelState((7 A
)((A B
;((B C
if** 
(** 
await** 
_appDBcontext** #
.**# $ 
ServiciosAdicionales**$ 8
.**8 9
	FindAsync**9 B
(**B C
servicio**C K
.**K L

IdServicio**L V
)**V W
!=**X Z
null**[ _
)**_ `
return**a g

BadRequest**h r
(**r s
$str	**s ñ
)
**ñ ó
;
**ó ò
if,, 
(,, 
await,, 
_appDBcontext,, #
.,,# $
Reservas,,$ ,
.,,, -
	FindAsync,,- 6
(,,6 7
servicio,,7 ?
.,,? @
	IdReserva,,@ I
),,I J
==,,K M
null,,N R
),,R S
return,,T Z

BadRequest,,[ e
(,,e f
$str,,f |
),,| }
;,,} ~
if.. 
(.. 
servicio.. 
... 
Costo.. 
<..  
$num..! "
).." #
return..$ *

BadRequest..+ 5
(..5 6
$str..6 d
)..d e
;..e f
_appDBcontext00 
.00  
ServiciosAdicionales00 .
.00. /
Add00/ 2
(002 3
servicio003 ;
)00; <
;00< =
await11 
_appDBcontext11 
.11  
SaveChangesAsync11  0
(110 1
)111 2
;112 3
return22 
Ok22 
(22 
servicio22 
)22 
;22  
}33 	
[55 	
HttpPut55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
UpdateServicio66) 7
(667 8
int668 ;
id66< >
,66> ?
ServicioAdicional66@ Q
servicio66R Z
)66Z [
{77 	
if88 
(88 
!88 

ModelState88 
.88 
IsValid88 #
)88# $
return88% +

BadRequest88, 6
(886 7

ModelState887 A
)88A B
;88B C
var:: 
servicioExistente:: !
=::" #
await::$ )
_appDBcontext::* 7
.::7 8 
ServiciosAdicionales::8 L
.::L M
	FindAsync::M V
(::V W
id::W Y
)::Y Z
;::Z [
if<< 
(<< 
servicioExistente<< !
==<<" $
null<<% )
)<<) *
return<<+ 1
NotFound<<2 :
(<<: ;
$str<<; ^
)<<^ _
;<<_ `
if>> 
(>> 
await>> 
_appDBcontext>> #
.>># $
Reservas>>$ ,
.>>, -
	FindAsync>>- 6
(>>6 7
servicio>>7 ?
.>>? @
	IdReserva>>@ I
)>>I J
==>>K M
null>>N R
)>>R S
return>>T Z

BadRequest>>[ e
(>>e f
$str>>f |
)>>| }
;>>} ~
if@@ 
(@@ 
servicio@@ 
.@@ 
Costo@@ 
<@@  
$num@@! "
)@@" #
return@@$ *

BadRequest@@+ 5
(@@5 6
$str@@6 d
)@@d e
;@@e f
servicioExistenteBB 
.BB 
	IdReservaBB '
=BB( )
servicioBB* 2
.BB2 3
	IdReservaBB3 <
;BB< =
servicioExistenteCC 
.CC 
DescripcionCC )
=CC* +
servicioCC, 4
.CC4 5
DescripcionCC5 @
;CC@ A
servicioExistenteDD 
.DD 
CostoDD #
=DD$ %
servicioDD& .
.DD. /
CostoDD/ 4
;DD4 5
awaitFF 
_appDBcontextFF 
.FF  
SaveChangesAsyncFF  0
(FF0 1
)FF1 2
;FF2 3
returnGG 
OkGG 
(GG 
servicioExistenteGG '
)GG' (
;GG( )
}HH 	
[KK 	

HttpDeleteKK	 
(KK 
$strKK 
)KK 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
DeleteProductoLL) 7
(LL7 8
intLL8 ;
idLL< >
)LL> ?
{MM 	
varNN 
servicioNN 
=NN 
awaitNN  
_appDBcontextNN! .
.NN. / 
ServiciosAdicionalesNN/ C
.NNC D
	FindAsyncNND M
(NNM N
idNNN P
)NNP Q
;NNQ R
ifPP 
(PP 
servicioPP 
==PP 
nullPP  
)PP  !
returnPP" (
NotFoundPP) 1
(PP1 2
$strPP2 U
)PPU V
;PPV W
_appDBcontextRR 
.RR  
ServiciosAdicionalesRR .
.RR. /
RemoveRR/ 5
(RR5 6
servicioRR6 >
)RR> ?
;RR? @
awaitSS 
_appDBcontextSS 
.SS  
SaveChangesAsyncSS  0
(SS0 1
)SS1 2
;SS2 3
returnTT 
OkTT 
(TT 
servicioTT 
)TT 
;TT  
}UU 	
}VV 
[XX 
RouteXX 

(XX
 
$strXX 
)XX 
]XX 
[YY 
ApiControllerYY 
]YY 
publicZZ 

classZZ 
ReservaControllerZZ "
:ZZ# $
ControllerBaseZZ% 3
{[[ 
private\\ 
readonly\\ 
AppDBContext\\ %
_appDBcontext\\& 3
;\\3 4
public^^ 
ReservaController^^  
(^^  !
AppDBContext^^! -
appDBcontext^^. :
)^^: ;
{__ 	
_appDBcontext`` 
=`` 
appDBcontext`` (
;``( )
}aa 	
[dd 	
HttpGetdd	 
]dd 
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
GetReservasee) 4
(ee4 5
)ee5 6
{ff 	
returngg 
Okgg 
(gg 
awaitgg 
_appDBcontextgg )
.gg) *
Reservasgg* 2
.gg2 3
ToListAsyncgg3 >
(gg> ?
)gg? @
)gg@ A
;ggA B
}hh 	
[jj 	
HttpGetjj	 
(jj 
$strjj 
)jj 
]jj 
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (

GetReservakk) 3
(kk3 4
intkk4 7
idkk8 :
)kk: ;
{ll 	
varmm 
reservamm 
=mm 
awaitmm 
_appDBcontextmm  -
.mm- .
Reservasmm. 6
.mm6 7
	FindAsyncmm7 @
(mm@ A
idmmA C
)mmC D
;mmD E
ifoo 
(oo 
reservaoo 
==oo 
nulloo 
)oo  
returnoo! '
NotFoundoo( 0
(oo0 1
$stroo1 T
)ooT U
;ooU V
returnqq 
Okqq 
(qq 
reservaqq 
)qq 
;qq 
}rr 	
[tt 	
HttpPosttt	 
]tt 
publicuu 
asyncuu 
Taskuu 
<uu 
IActionResultuu '
>uu' (
CreateReservauu) 6
(uu6 7
Reservauu7 >
reservauu? F
)uuF G
{vv 	
ifww 
(ww 
!ww 

ModelStateww 
.ww 
IsValidww #
)ww# $
returnww% +

BadRequestww, 6
(ww6 7

ModelStateww7 A
)wwA B
;wwB C
ifyy 
(yy 
awaityy 
_appDBcontextyy #
.yy# $
Reservasyy$ ,
.yy, -
	FindAsyncyy- 6
(yy6 7
reservayy7 >
.yy> ?
	IdReservayy? H
)yyH I
!=yyJ L
nullyyM Q
)yyQ R
returnyyS Y

BadRequestyyZ d
(yyd e
$str	yye à
)
yyà â
;
yyâ ä
if{{ 
({{ 
await{{ 
_appDBcontext{{ #
.{{# $
Habitaciones{{$ 0
.{{0 1
	FindAsync{{1 :
({{: ;
reserva{{; B
.{{B C
IdHabitacion{{C O
){{O P
=={{Q S
null{{T X
){{X Y
return{{Z `

BadRequest{{a k
({{k l
$str	{{l Ü
)
{{Ü á
;
{{á à
if}} 
(}} 
await}} 
_appDBcontext}} #
.}}# $
Clientes}}$ ,
.}}, -
	FindAsync}}- 6
(}}6 7
reserva}}7 >
.}}> ?
	IdCliente}}? H
)}}H I
==}}J L
null}}M Q
)}}Q R
return}}S Y

BadRequest}}Z d
(}}d e
$str}}e |
)}}| }
;}}} ~
if 
( 
reserva 
. 
FechaFin  
<! "
reserva# *
.* +
FechaInicio+ 6
)6 7
return8 >

BadRequest? I
(I J
$strJ z
)z {
;{ |
if
ÅÅ 
(
ÅÅ 
reserva
ÅÅ 
.
ÅÅ 
Costo
ÅÅ 
<
ÅÅ 
$num
ÅÅ  !
)
ÅÅ! "
return
ÅÅ# )

BadRequest
ÅÅ* 4
(
ÅÅ4 5
$str
ÅÅ5 b
)
ÅÅb c
;
ÅÅc d
_appDBcontext
ÑÑ 
.
ÑÑ 
Reservas
ÑÑ "
.
ÑÑ" #
Add
ÑÑ# &
(
ÑÑ& '
reserva
ÑÑ' .
)
ÑÑ. /
;
ÑÑ/ 0
await
ÖÖ 
_appDBcontext
ÖÖ 
.
ÖÖ  
SaveChangesAsync
ÖÖ  0
(
ÖÖ0 1
)
ÖÖ1 2
;
ÖÖ2 3
return
ÜÜ 
Ok
ÜÜ 
(
ÜÜ 
reserva
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 	
[
ââ 	
HttpPut
ââ	 
(
ââ 
$str
ââ 
)
ââ 
]
ââ 
public
ää 
async
ää 
Task
ää 
<
ää 
IActionResult
ää '
>
ää' (
UpdateReserva
ää) 6
(
ää6 7
int
ää7 :
id
ää; =
,
ää= >
Reserva
ää? F
reserva
ääG N
)
ääN O
{
ãã 	
var
åå 
reservaExistente
åå  
=
åå! "
await
åå# (
_appDBcontext
åå) 6
.
åå6 7
Reservas
åå7 ?
.
åå? @
	FindAsync
åå@ I
(
ååI J
id
ååJ L
)
ååL M
;
ååM N
if
éé 
(
éé 
!
éé 

ModelState
éé 
.
éé 
IsValid
éé #
)
éé# $
return
éé% +

BadRequest
éé, 6
(
éé6 7

ModelState
éé7 A
)
ééA B
;
ééB C
if
êê 
(
êê 
reservaExistente
êê  
==
êê! #
null
êê$ (
)
êê( )
return
êê* 0
NotFound
êê1 9
(
êê9 :
$str
êê: ]
)
êê] ^
;
êê^ _
if
íí 
(
íí 
await
íí 
_appDBcontext
íí #
.
íí# $
Habitaciones
íí$ 0
.
íí0 1
	FindAsync
íí1 :
(
íí: ;
reserva
íí; B
.
ííB C
IdHabitacion
ííC O
)
ííO P
==
ííQ S
null
ííT X
)
ííX Y
return
ííZ `

BadRequest
íía k
(
íík l
$strííl Ö
)ííÖ Ü
;ííÜ á
if
îî 
(
îî 
await
îî 
_appDBcontext
îî #
.
îî# $
Clientes
îî$ ,
.
îî, -
	FindAsync
îî- 6
(
îî6 7
reserva
îî7 >
.
îî> ?
	IdCliente
îî? H
)
îîH I
==
îîJ L
null
îîM Q
)
îîQ R
return
îîS Y

BadRequest
îîZ d
(
îîd e
$str
îîe {
)
îî{ |
;
îî| }
if
ññ 
(
ññ 
reserva
ññ 
.
ññ 
FechaFin
ññ  
<
ññ! "
reserva
ññ# *
.
ññ* +
FechaInicio
ññ+ 6
)
ññ6 7
return
ññ8 >

BadRequest
ññ? I
(
ññI J
$str
ññJ y
)
ññy z
;
ññz {
if
òò 
(
òò 
reserva
òò 
.
òò 
Costo
òò 
<
òò 
$num
òò  !
)
òò! "
return
òò# )

BadRequest
òò* 4
(
òò4 5
$str
òò5 b
)
òòb c
;
òòc d
reservaExistente
öö 
.
öö 
IdHabitacion
öö )
=
öö* +
reserva
öö, 3
.
öö3 4
IdHabitacion
öö4 @
;
öö@ A
reservaExistente
õõ 
.
õõ 
	IdCliente
õõ &
=
õõ' (
reserva
õõ) 0
.
õõ0 1
	IdCliente
õõ1 :
;
õõ: ;
reservaExistente
úú 
.
úú 
FechaInicio
úú (
=
úú) *
reserva
úú+ 2
.
úú2 3
FechaInicio
úú3 >
;
úú> ?
reservaExistente
ùù 
.
ùù 
FechaFin
ùù %
=
ùù& '
reserva
ùù( /
.
ùù/ 0
FechaFin
ùù0 8
;
ùù8 9
reservaExistente
ûû 
.
ûû 
Costo
ûû "
=
ûû# $
reserva
ûû% ,
.
ûû, -
Costo
ûû- 2
;
ûû2 3
await
†† 
_appDBcontext
†† 
.
††  
SaveChangesAsync
††  0
(
††0 1
)
††1 2
;
††2 3
return
°° 
Ok
°° 
(
°° 
reservaExistente
°° &
)
°°& '
;
°°' (
}
¢¢ 	
[
§§ 	

HttpDelete
§§	 
(
§§ 
$str
§§ 
)
§§ 
]
§§ 
public
•• 
async
•• 
Task
•• 
<
•• 
IActionResult
•• '
>
••' (
DeleteReserva
••) 6
(
••6 7
int
••7 :
id
••; =
)
••= >
{
¶¶ 	
var
ßß 
reserva
ßß 
=
ßß 
await
ßß 
_appDBcontext
ßß  -
.
ßß- .
Reservas
ßß. 6
.
ßß6 7
	FindAsync
ßß7 @
(
ßß@ A
id
ßßA C
)
ßßC D
;
ßßD E
if
©© 
(
©© 
reserva
©© 
==
©© 
null
©© 
)
©©  
return
©©! '
NotFound
©©( 0
(
©©0 1
$str
©©1 T
)
©©T U
;
©©U V
if
´´ 
(
´´ 
reserva
´´ 
.
´´ "
ServiciosAdicionales
´´ ,
.
´´, -
Count
´´- 2
>
´´3 4
$num
´´5 6
)
´´6 7
return
´´8 >

BadRequest
´´? I
(
´´I J
$str´´J É
)´´É Ñ
;´´Ñ Ö
_appDBcontext
≠≠ 
.
≠≠ 
Reservas
≠≠ "
.
≠≠" #
Remove
≠≠# )
(
≠≠) *
reserva
≠≠* 1
)
≠≠1 2
;
≠≠2 3
await
ÆÆ 
_appDBcontext
ÆÆ 
.
ÆÆ  
SaveChangesAsync
ÆÆ  0
(
ÆÆ0 1
)
ÆÆ1 2
;
ÆÆ2 3
return
ØØ 
Ok
ØØ 
(
ØØ 
reserva
ØØ 
)
ØØ 
;
ØØ 
}
∞∞ 	
}
±± 
[
≥≥ 
Route
≥≥ 

(
≥≥
 
$str
≥≥ 
)
≥≥ 
]
≥≥ 
[
¥¥ 
ApiController
¥¥ 
]
¥¥ 
public
µµ 

class
µµ 
ClienteController
µµ "
:
µµ# $
ControllerBase
µµ% 3
{
∂∂ 
private
∑∑ 
readonly
∑∑ 
AppDBContext
∑∑ %
_appDBcontext
∑∑& 3
;
∑∑3 4
public
∏∏ 
ClienteController
∏∏  
(
∏∏  !
AppDBContext
∏∏! -
appDBcontext
∏∏. :
)
∏∏: ;
{
ππ 	
_appDBcontext
∫∫ 
=
∫∫ 
appDBcontext
∫∫ (
;
∫∫( )
}
ªª 	
[
ææ 	
HttpGet
ææ	 
]
ææ 
public
øø 
async
øø 
Task
øø 
<
øø 
IActionResult
øø '
>
øø' (
GetClientes
øø) 4
(
øø4 5
)
øø5 6
{
¿¿ 	
return
¡¡ 
Ok
¡¡ 
(
¡¡ 
await
¡¡ 
_appDBcontext
¡¡ )
.
¡¡) *
Clientes
¡¡* 2
.
¡¡2 3
ToListAsync
¡¡3 >
(
¡¡> ?
)
¡¡? @
)
¡¡@ A
;
¡¡A B
}
¬¬ 	
[
ƒƒ 	
HttpGet
ƒƒ	 
(
ƒƒ 
$str
ƒƒ 
)
ƒƒ 
]
ƒƒ 
public
≈≈ 
async
≈≈ 
Task
≈≈ 
<
≈≈ 
IActionResult
≈≈ '
>
≈≈' (

GetCliente
≈≈) 3
(
≈≈3 4
int
≈≈4 7
id
≈≈8 :
)
≈≈: ;
{
∆∆ 	
var
«« 
cliente
«« 
=
«« 
await
«« 
_appDBcontext
««  -
.
««- .
Clientes
««. 6
.
««6 7
	FindAsync
««7 @
(
««@ A
id
««A C
)
««C D
;
««D E
if
…… 
(
…… 
cliente
…… 
==
…… 
null
…… 
)
……  
return
……! '
NotFound
……( 0
(
……0 1
$str
……1 S
)
……S T
;
……T U
return
ÀÀ 
Ok
ÀÀ 
(
ÀÀ 
cliente
ÀÀ 
)
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
private
ŒŒ 
static
ŒŒ 
bool
ŒŒ 
EsCedulaValida
ŒŒ *
(
ŒŒ* +
string
ŒŒ+ 1
ci
ŒŒ2 4
)
ŒŒ4 5
{
œœ 	
if
—— 
(
—— 
ci
—— 
.
—— 
Length
—— 
!=
—— 
$num
—— 
||
——  "
!
——# $
ci
——$ &
.
——& '
All
——' *
(
——* +
char
——+ /
.
——/ 0
IsDigit
——0 7
)
——7 8
)
——8 9
return
““ 
false
““ 
;
““ 
int
’’ 
	provincia
’’ 
=
’’ 
int
’’ 
.
’’  
Parse
’’  %
(
’’% &
ci
’’& (
.
’’( )
	Substring
’’) 2
(
’’2 3
$num
’’3 4
,
’’4 5
$num
’’6 7
)
’’7 8
)
’’8 9
;
’’9 :
if
÷÷ 
(
÷÷ 
	provincia
÷÷ 
<
÷÷ 
$num
÷÷ 
||
÷÷  
	provincia
÷÷! *
>
÷÷+ ,
$num
÷÷- /
)
÷÷/ 0
return
◊◊ 
false
◊◊ 
;
◊◊ 
int
⁄⁄ 
tercerDigito
⁄⁄ 
=
⁄⁄ 
int
⁄⁄ "
.
⁄⁄" #
Parse
⁄⁄# (
(
⁄⁄( )
ci
⁄⁄) +
[
⁄⁄+ ,
$num
⁄⁄, -
]
⁄⁄- .
.
⁄⁄. /
ToString
⁄⁄/ 7
(
⁄⁄7 8
)
⁄⁄8 9
)
⁄⁄9 :
;
⁄⁄: ;
if
€€ 
(
€€ 
tercerDigito
€€ 
>=
€€ 
$num
€€  !
)
€€! "
return
‹‹ 
false
‹‹ 
;
‹‹ 
int
ﬂﬂ 
[
ﬂﬂ 
]
ﬂﬂ 
coeficientes
ﬂﬂ 
=
ﬂﬂ  
{
ﬂﬂ! "
$num
ﬂﬂ# $
,
ﬂﬂ$ %
$num
ﬂﬂ& '
,
ﬂﬂ' (
$num
ﬂﬂ) *
,
ﬂﬂ* +
$num
ﬂﬂ, -
,
ﬂﬂ- .
$num
ﬂﬂ/ 0
,
ﬂﬂ0 1
$num
ﬂﬂ2 3
,
ﬂﬂ3 4
$num
ﬂﬂ5 6
,
ﬂﬂ6 7
$num
ﬂﬂ8 9
,
ﬂﬂ9 :
$num
ﬂﬂ; <
}
ﬂﬂ= >
;
ﬂﬂ> ?
int
‡‡ 
suma
‡‡ 
=
‡‡ 
$num
‡‡ 
;
‡‡ 
for
‚‚ 
(
‚‚ 
int
‚‚ 
i
‚‚ 
=
‚‚ 
$num
‚‚ 
;
‚‚ 
i
‚‚ 
<
‚‚ 
$num
‚‚  !
;
‚‚! "
i
‚‚# $
++
‚‚$ &
)
‚‚& '
{
„„ 
int
‰‰ 
producto
‰‰ 
=
‰‰ 
int
‰‰ "
.
‰‰" #
Parse
‰‰# (
(
‰‰( )
ci
‰‰) +
[
‰‰+ ,
i
‰‰, -
]
‰‰- .
.
‰‰. /
ToString
‰‰/ 7
(
‰‰7 8
)
‰‰8 9
)
‰‰9 :
*
‰‰; <
coeficientes
‰‰= I
[
‰‰I J
i
‰‰J K
]
‰‰K L
;
‰‰L M
suma
ÂÂ 
+=
ÂÂ 
producto
ÂÂ  
>=
ÂÂ! #
$num
ÂÂ$ &
?
ÂÂ' (
producto
ÂÂ) 1
-
ÂÂ2 3
$num
ÂÂ4 5
:
ÂÂ6 7
producto
ÂÂ8 @
;
ÂÂ@ A
}
ÊÊ 
int
ËË 
digitoVerificador
ËË !
=
ËË" #
(
ËË$ %
$num
ËË% '
-
ËË( )
(
ËË* +
suma
ËË+ /
%
ËË0 1
$num
ËË2 4
)
ËË4 5
)
ËË5 6
%
ËË7 8
$num
ËË9 ;
;
ËË; <
return
ÈÈ 
digitoVerificador
ÈÈ $
==
ÈÈ% '
int
ÈÈ( +
.
ÈÈ+ ,
Parse
ÈÈ, 1
(
ÈÈ1 2
ci
ÈÈ2 4
[
ÈÈ4 5
$num
ÈÈ5 6
]
ÈÈ6 7
.
ÈÈ7 8
ToString
ÈÈ8 @
(
ÈÈ@ A
)
ÈÈA B
)
ÈÈB C
;
ÈÈC D
}
ÍÍ 	
[
ÏÏ 	
HttpPost
ÏÏ	 
]
ÏÏ 
public
ÌÌ 
async
ÌÌ 
Task
ÌÌ 
<
ÌÌ 
IActionResult
ÌÌ '
>
ÌÌ' (
CreateCliente
ÌÌ) 6
(
ÌÌ6 7
Cliente
ÌÌ7 >
cliente
ÌÌ? F
)
ÌÌF G
{
ÓÓ 	
if
ÔÔ 
(
ÔÔ 
!
ÔÔ 

ModelState
ÔÔ 
.
ÔÔ 
IsValid
ÔÔ #
)
ÔÔ# $
return
ÔÔ% +

BadRequest
ÔÔ, 6
(
ÔÔ6 7

ModelState
ÔÔ7 A
)
ÔÔA B
;
ÔÔB C
if
ÒÒ 
(
ÒÒ 
await
ÒÒ 
_appDBcontext
ÒÒ #
.
ÒÒ# $
Clientes
ÒÒ$ ,
.
ÒÒ, -
	FindAsync
ÒÒ- 6
(
ÒÒ6 7
cliente
ÒÒ7 >
.
ÒÒ> ?
	IdCliente
ÒÒ? H
)
ÒÒH I
!=
ÒÒJ L
null
ÒÒM Q
)
ÒÒQ R
return
ÒÒS Y

BadRequest
ÒÒZ d
(
ÒÒd e
$strÒÒe á
)ÒÒá à
;ÒÒà â
if
ÛÛ 
(
ÛÛ 
await
ÛÛ 
_appDBcontext
ÛÛ #
.
ÛÛ# $
Clientes
ÛÛ$ ,
.
ÛÛ, -
	FindAsync
ÛÛ- 6
(
ÛÛ6 7
cliente
ÛÛ7 >
.
ÛÛ> ?
CI
ÛÛ? A
)
ÛÛA B
!=
ÛÛC E
null
ÛÛF J
)
ÛÛJ K
return
ÛÛL R

BadRequest
ÛÛS ]
(
ÛÛ] ^
$strÛÛ^ Ñ
)ÛÛÑ Ö
;ÛÛÖ Ü
if
ıı 
(
ıı 
cliente
ıı 
.
ıı 
CI
ıı 
!=
ıı 
null
ıı "
&&
ıı# %
!
ıı& '
EsCedulaValida
ıı' 5
(
ıı5 6
cliente
ıı6 =
.
ıı= >
CI
ıı> @
)
ıı@ A
)
ııA B
return
ııC I

BadRequest
ııJ T
(
ııT U
$str
ııU w
)
ııw x
;
ııx y
_appDBcontext
˜˜ 
.
˜˜ 
Clientes
˜˜ "
.
˜˜" #
Add
˜˜# &
(
˜˜& '
cliente
˜˜' .
)
˜˜. /
;
˜˜/ 0
await
¯¯ 
_appDBcontext
¯¯ 
.
¯¯  
SaveChangesAsync
¯¯  0
(
¯¯0 1
)
¯¯1 2
;
¯¯2 3
return
˘˘ 
Ok
˘˘ 
(
˘˘ 
cliente
˘˘ 
)
˘˘ 
;
˘˘ 
}
˙˙ 	
[
¸¸ 	
HttpPut
¸¸	 
(
¸¸ 
$str
¸¸ 
)
¸¸ 
]
¸¸ 
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 
IActionResult
˝˝ '
>
˝˝' (
UpdateCliente
˝˝) 6
(
˝˝6 7
int
˝˝7 :
id
˝˝; =
,
˝˝= >
Cliente
˝˝? F
cliente
˝˝G N
)
˝˝N O
{
˛˛ 	
var
ˇˇ 
clienteExistente
ˇˇ  
=
ˇˇ! "
await
ˇˇ# (
_appDBcontext
ˇˇ) 6
.
ˇˇ6 7
Clientes
ˇˇ7 ?
.
ˇˇ? @
	FindAsync
ˇˇ@ I
(
ˇˇI J
id
ˇˇJ L
)
ˇˇL M
;
ˇˇM N
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 

ModelState
ÅÅ 
.
ÅÅ 
IsValid
ÅÅ #
)
ÅÅ# $
return
ÅÅ% +

BadRequest
ÅÅ, 6
(
ÅÅ6 7

ModelState
ÅÅ7 A
)
ÅÅA B
;
ÅÅB C
if
ÉÉ 
(
ÉÉ 
clienteExistente
ÉÉ  
==
ÉÉ! #
null
ÉÉ$ (
)
ÉÉ( )
return
ÉÉ* 0
NotFound
ÉÉ1 9
(
ÉÉ9 :
$str
ÉÉ: \
)
ÉÉ\ ]
;
ÉÉ] ^
if
ÖÖ 
(
ÖÖ 
cliente
ÖÖ 
.
ÖÖ 
CI
ÖÖ 
!=
ÖÖ 
null
ÖÖ "
&&
ÖÖ# %
!
ÖÖ& '
EsCedulaValida
ÖÖ' 5
(
ÖÖ5 6
cliente
ÖÖ6 =
.
ÖÖ= >
CI
ÖÖ> @
)
ÖÖ@ A
)
ÖÖA B
return
ÖÖC I

BadRequest
ÖÖJ T
(
ÖÖT U
$str
ÖÖU w
)
ÖÖw x
;
ÖÖx y
clienteExistente
áá 
.
áá 
Nombre
áá #
=
áá$ %
cliente
áá& -
.
áá- .
Nombre
áá. 4
;
áá4 5
clienteExistente
àà 
.
àà 
Apellido
àà %
=
àà& '
cliente
àà( /
.
àà/ 0
Apellido
àà0 8
;
àà8 9
clienteExistente
ââ 
.
ââ 
CI
ââ 
=
ââ  !
cliente
ââ" )
.
ââ) *
CI
ââ* ,
;
ââ, -
await
ãã 
_appDBcontext
ãã 
.
ãã  
SaveChangesAsync
ãã  0
(
ãã0 1
)
ãã1 2
;
ãã2 3
return
åå 
Ok
åå 
(
åå 
cliente
åå 
)
åå 
;
åå 
}
çç 	
[
èè 	

HttpDelete
èè	 
(
èè 
$str
èè 
)
èè 
]
èè 
public
êê 
async
êê 
Task
êê 
<
êê 
IActionResult
êê '
>
êê' (
DeleteCliente
êê) 6
(
êê6 7
int
êê7 :
id
êê; =
)
êê= >
{
ëë 	
var
íí 
cliente
íí 
=
íí 
await
íí 
_appDBcontext
íí  -
.
íí- .
Clientes
íí. 6
.
íí6 7
	FindAsync
íí7 @
(
íí@ A
id
ííA C
)
ííC D
;
ííD E
if
îî 
(
îî 
cliente
îî 
==
îî 
null
îî 
)
îî  
return
îî! '
NotFound
îî( 0
(
îî0 1
$str
îî1 S
)
îîS T
;
îîT U
if
ññ 
(
ññ 
cliente
ññ 
.
ññ 
Reservas
ññ  
.
ññ  !
Count
ññ! &
>
ññ' (
$num
ññ) *
)
ññ* +
return
ññ, 2

BadRequest
ññ3 =
(
ññ= >
$str
ññ> w
)
ññw x
;
ññx y
_appDBcontext
ôô 
.
ôô 
Clientes
ôô "
.
ôô" #
Remove
ôô# )
(
ôô) *
cliente
ôô* 1
)
ôô1 2
;
ôô2 3
await
öö 
_appDBcontext
öö 
.
öö  
SaveChangesAsync
öö  0
(
öö0 1
)
öö1 2
;
öö2 3
return
õõ 
Ok
õõ 
(
õõ 
cliente
õõ 
)
õõ 
;
õõ 
}
úú 	
}
ùù 
[
üü 
Route
üü 

(
üü
 
$str
üü 
)
üü 
]
üü 
[
†† 
ApiController
†† 
]
†† 
public
°° 

class
°° "
HabitacionController
°° %
:
°°& '
ControllerBase
°°( 6
{
¢¢ 
private
££ 
readonly
££ 
AppDBContext
££ %
_appDBcontext
££& 3
;
££3 4
public
§§ "
HabitacionController
§§ #
(
§§# $
AppDBContext
§§$ 0
appDBcontext
§§1 =
)
§§= >
{
•• 	
_appDBcontext
¶¶ 
=
¶¶ 
appDBcontext
¶¶ (
;
¶¶( )
}
ßß 	
[
™™ 	
HttpGet
™™	 
]
™™ 
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
IActionResult
´´ '
>
´´' (
GetHabitaciones
´´) 8
(
´´8 9
)
´´9 :
{
¨¨ 	
return
≠≠ 
Ok
≠≠ 
(
≠≠ 
await
≠≠ 
_appDBcontext
≠≠ )
.
≠≠) *
Habitaciones
≠≠* 6
.
≠≠6 7
ToListAsync
≠≠7 B
(
≠≠B C
)
≠≠C D
)
≠≠D E
;
≠≠E F
}
ÆÆ 	
[
∞∞ 	
HttpGet
∞∞	 
(
∞∞ 
$str
∞∞ 
)
∞∞ 
]
∞∞ 
public
±± 
async
±± 
Task
±± 
<
±± 
IActionResult
±± '
>
±±' (
GetHabitacion
±±) 6
(
±±6 7
int
±±7 :
id
±±; =
)
±±= >
{
≤≤ 	
var
≥≥ 

habitacion
≥≥ 
=
≥≥ 
await
≥≥ "
_appDBcontext
≥≥# 0
.
≥≥0 1
Habitaciones
≥≥1 =
.
≥≥= >
	FindAsync
≥≥> G
(
≥≥G H
id
≥≥H J
)
≥≥J K
;
≥≥K L
if
µµ 
(
µµ 

habitacion
µµ 
==
µµ 
null
µµ "
)
µµ" #
return
µµ$ *
NotFound
µµ+ 3
(
µµ3 4
$str
µµ4 Z
)
µµZ [
;
µµ[ \
return
∑∑ 
Ok
∑∑ 
(
∑∑ 

habitacion
∑∑  
)
∑∑  !
;
∑∑! "
}
∏∏ 	
[
∫∫ 	
HttpPost
∫∫	 
]
∫∫ 
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' (
CreateHabitacion
ªª) 9
(
ªª9 :

Habitacion
ªª: D

habitacion
ªªE O
)
ªªO P
{
ºº 	
if
ΩΩ 
(
ΩΩ 
!
ΩΩ 

ModelState
ΩΩ 
.
ΩΩ 
IsValid
ΩΩ #
)
ΩΩ# $
return
ΩΩ% +

BadRequest
ΩΩ, 6
(
ΩΩ6 7

ModelState
ΩΩ7 A
)
ΩΩA B
;
ΩΩB C
if
øø 
(
øø 
await
øø 
_appDBcontext
øø #
.
øø# $
Habitaciones
øø$ 0
.
øø0 1
	FindAsync
øø1 :
(
øø: ;

habitacion
øø; E
.
øøE F
IdHabitacion
øøF R
)
øøR S
!=
øøT V
null
øøW [
)
øø[ \
return
øø] c

BadRequest
øød n
(
øøn o
$strøøo ï
)øøï ñ
;øøñ ó
_appDBcontext
¡¡ 
.
¡¡ 
Habitaciones
¡¡ &
.
¡¡& '
Add
¡¡' *
(
¡¡* +

habitacion
¡¡+ 5
)
¡¡5 6
;
¡¡6 7
await
¬¬ 
_appDBcontext
¬¬ 
.
¬¬  
SaveChangesAsync
¬¬  0
(
¬¬0 1
)
¬¬1 2
;
¬¬2 3
return
√√ 
Ok
√√ 
(
√√ 

habitacion
√√  
)
√√  !
;
√√! "
}
ƒƒ 	
[
∆∆ 	
HttpPut
∆∆	 
(
∆∆ 
$str
∆∆ 
)
∆∆ 
]
∆∆ 
public
«« 
async
«« 
Task
«« 
<
«« 
IActionResult
«« '
>
««' (
UpdateHabitacion
««) 9
(
««9 :
int
««: =
id
««> @
,
««@ A

Habitacion
««B L

habitacion
««M W
)
««W X
{
»» 	
var
…… !
habitacionExistente
…… #
=
……$ %
await
……& +
_appDBcontext
……, 9
.
……9 :
Habitaciones
……: F
.
……F G
	FindAsync
……G P
(
……P Q
id
……Q S
)
……S T
;
……T U
if
ÀÀ 
(
ÀÀ 
!
ÀÀ 

ModelState
ÀÀ 
.
ÀÀ 
IsValid
ÀÀ #
)
ÀÀ# $
return
ÀÀ% +

BadRequest
ÀÀ, 6
(
ÀÀ6 7

ModelState
ÀÀ7 A
)
ÀÀA B
;
ÀÀB C
if
ÕÕ 
(
ÕÕ !
habitacionExistente
ÕÕ #
==
ÕÕ$ &
null
ÕÕ' +
)
ÕÕ+ ,
return
ÕÕ- 3
NotFound
ÕÕ4 <
(
ÕÕ< =
$str
ÕÕ= c
)
ÕÕc d
;
ÕÕd e!
habitacionExistente
œœ 
.
œœ  
Tipo
œœ  $
=
œœ% &

habitacion
œœ' 1
.
œœ1 2
Tipo
œœ2 6
;
œœ6 7!
habitacionExistente
–– 
.
––  

Disponible
––  *
=
––+ ,

habitacion
––- 7
.
––7 8

Disponible
––8 B
;
––B C
await
““ 
_appDBcontext
““ 
.
““  
SaveChangesAsync
““  0
(
““0 1
)
““1 2
;
““2 3
return
”” 
Ok
”” 
(
”” 

habitacion
””  
)
””  !
;
””! "
}
‘‘ 	
[
÷÷ 	

HttpDelete
÷÷	 
(
÷÷ 
$str
÷÷ 
)
÷÷ 
]
÷÷ 
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 
IActionResult
◊◊ '
>
◊◊' (
DeleteHabitacion
◊◊) 9
(
◊◊9 :
int
◊◊: =
id
◊◊> @
)
◊◊@ A
{
ÿÿ 	
var
ŸŸ 

habitacion
ŸŸ 
=
ŸŸ 
await
ŸŸ "
_appDBcontext
ŸŸ# 0
.
ŸŸ0 1
Habitaciones
ŸŸ1 =
.
ŸŸ= >
	FindAsync
ŸŸ> G
(
ŸŸG H
id
ŸŸH J
)
ŸŸJ K
;
ŸŸK L
if
€€ 
(
€€ 

habitacion
€€ 
==
€€ 
null
€€ "
)
€€" #
return
€€$ *
NotFound
€€+ 3
(
€€3 4
$str
€€4 Z
)
€€Z [
;
€€[ \
if
›› 
(
›› 

habitacion
›› 
.
›› 
Reservas
›› #
.
››# $
Count
››$ )
>
››* +
$num
››, -
)
››- .
return
››/ 5

BadRequest
››6 @
(
››@ A
$str
››A }
)
››} ~
;
››~ 
_appDBcontext
ﬂﬂ 
.
ﬂﬂ 
Habitaciones
ﬂﬂ &
.
ﬂﬂ& '
Remove
ﬂﬂ' -
(
ﬂﬂ- .

habitacion
ﬂﬂ. 8
)
ﬂﬂ8 9
;
ﬂﬂ9 :
await
‡‡ 
_appDBcontext
‡‡ 
.
‡‡  
SaveChangesAsync
‡‡  0
(
‡‡0 1
)
‡‡1 2
;
‡‡2 3
return
·· 
Ok
·· 
(
·· 

habitacion
··  
)
··  !
;
··! "
}
‚‚ 	
}
„„ 
}‰‰ æc
pD:\almacenamiento\Clases ESPE\Semestre 6\2534-PRUEBAS DE SOFTWARE\C#\ReservasHotel\ReservasHotel\AppDBContext.cs
	namespace 	
ReservasHotel
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{ 
public		 
AppDBContext		 
(		 
DbContextOptions		 ,
<		, -
AppDBContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 

Habitacion 
>  
Habitaciones! -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
DbSet 
< 
Reserva 
> 
Reservas &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
Cliente 
> 
Clientes &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
ServicioAdicional &
>& ' 
ServiciosAdicionales( <
{= >
get? B
;B C
setD G
;G H
}I J
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
ServicioAdicional  1
>1 2
(2 3
)3 4
. 
HasOne 
( 
p 
=> 
p 
. 
Reserva &
)& '
. 
WithMany 
( 
c 
=> 
c  
.  ! 
ServiciosAdicionales! 5
)5 6
. 
HasForeignKey 
( 
p  
=>! #
p$ %
.% &
	IdReserva& /
)/ 0
;0 1
modelBuilder 
. 
Entity 
<  
Reserva  '
>' (
(( )
)) *
. 
HasOne 
( 
p 
=> 
p 
. 

Habitacion )
)) *
. 
WithMany 
( 
c 
=> 
c  
.  !
Reservas! )
)) *
. 
HasForeignKey 
( 
p  
=>! #
p$ %
.% &
IdHabitacion& 2
)2 3
;3 4
modelBuilder 
. 
Entity 
<  
Reserva  '
>' (
(( )
)) *
. 
HasOne 
( 
p 
=> 
p 
. 
Cliente &
)& '
. 
WithMany 
( 
c 
=> 
c  
.  !
Reservas! )
)) *
.   
HasForeignKey   
(   
p    
=>  ! #
p  $ %
.  % &
	IdCliente  & /
)  / 0
;  0 1
modelBuilder"" 
."" 
Entity"" 
<""  
ServicioAdicional""  1
>""1 2
(""2 3
)""3 4
.## 
Property## 
(## 
p## 
=>## 
p##  
.##  !
Costo##! &
)##& '
.$$ 
HasPrecision$$ 
($$ 
$num$$  
,$$  !
$num$$" #
)$$# $
;$$$ %
modelBuilder&& 
.&& 
Entity&& 
<&&  
Reserva&&  '
>&&' (
(&&( )
)&&) *
.'' 
Property'' 
('' 
p'' 
=>'' 
p''  
.''  !
Costo''! &
)''& '
.(( 
HasPrecision(( 
((( 
$num((  
,((  !
$num((" #
)((# $
;(($ %
base** 
.** 
OnModelCreating**  
(**  !
modelBuilder**! -
)**- .
;**. /
}++ 	
},, 
public.. 

class.. 

Habitacion.. 
{// 
[00 	
Key00	 
]00 
public11 
int11 
?11 
IdHabitacion11  
{11! "
get11# &
;11& '
set11( +
;11+ ,
}11- .
[33 	
Required33	 
(33 
ErrorMessage33 
=33  
$str33! H
)33H I
]33I J
[44 	
StringLength44	 
(44 
$num44 
,44 
ErrorMessage44 &
=44' (
$str44) V
)44V W
]44W X
public55 
string55 
?55 
Tipo55 
{55 
get55 !
;55! "
set55# &
;55& '
}55( )
[77 	
Required77	 
(77 
ErrorMessage77 
=77  
$str77! N
)77N O
]77O P
public88 
bool88 
?88 

Disponible88 
{88  !
get88" %
;88% &
set88' *
;88* +
}88, -
[:: 	

JsonIgnore::	 
]:: 
public;; 
ICollection;; 
<;; 
Reserva;; "
>;;" #
Reservas;;$ ,
{;;- .
get;;/ 2
;;;2 3
set;;4 7
;;;7 8
};;9 :
=;;; <
new;;= @
List;;A E
<;;E F
Reserva;;F M
>;;M N
(;;N O
);;O P
;;;P Q
}<< 
public>> 

class>> 
Cliente>> 
{?? 
[@@ 	
Key@@	 
]@@ 
publicAA 
intAA 
?AA 
	IdClienteAA 
{AA 
getAA  #
;AA# $
setAA% (
;AA( )
}AA* +
[CC 	
RequiredCC	 
(CC 
ErrorMessageCC 
=CC  
$strCC! <
)CC< =
]CC= >
[DD 	
StringLengthDD	 
(DD 
$numDD 
,DD 
ErrorMessageDD &
=DD' (
$strDD) X
)DDX Y
]DDY Z
publicEE 
stringEE 
?EE 
NombreEE 
{EE 
getEE  #
;EE# $
setEE% (
;EE( )
}EE* +
[GG 	
RequiredGG	 
(GG 
ErrorMessageGG 
=GG  
$strGG! >
)GG> ?
]GG? @
[HH 	
StringLengthHH	 
(HH 
$numHH 
,HH 
ErrorMessageHH &
=HH' (
$strHH) Z
)HHZ [
]HH[ \
publicII 
stringII 
?II 
ApellidoII 
{II  !
getII" %
;II% &
setII' *
;II* +
}II, -
[KK 	
RequiredKK	 
(KK 
ErrorMessageKK 
=KK  
$strKK! <
)KK< =
]KK= >
[LL 	
StringLengthLL	 
(LL 
$numLL 
,LL 
MinimumLengthLL '
=LL( )
$numLL* ,
,LL, -
ErrorMessageLL. :
=LL; <
$strLL= b
)LLb c
]LLc d
publicMM 
stringMM 
?MM 
CIMM 
{MM 
getMM 
;MM  
setMM! $
;MM$ %
}MM& '
[NN 	

JsonIgnoreNN	 
]NN 
publicOO 
ICollectionOO 
<OO 
ReservaOO "
>OO" #
ReservasOO$ ,
{OO- .
getOO/ 2
;OO2 3
setOO4 7
;OO7 8
}OO9 :
=OO; <
newOO= @
ListOOA E
<OOE F
ReservaOOF M
>OOM N
(OON O
)OOO P
;OOP Q
}PP 
publicRR 

classRR 
ServicioAdicionalRR "
{SS 
[TT 	
KeyTT	 
]TT 
publicUU 
intUU 
?UU 

IdServicioUU 
{UU  
getUU! $
;UU$ %
setUU& )
;UU) *
}UU+ ,
[WW 	
RequiredWW	 
(WW 
ErrorMessageWW 
=WW  
$strWW! A
)WWA B
]WWB C
[XX 	
StringLengthXX	 
(XX 
$numXX 
,XX 
ErrorMessageXX '
=XX( )
$strXX* _
)XX_ `
]XX` a
publicYY 
stringYY 
?YY 
DescripcionYY "
{YY# $
getYY% (
;YY( )
setYY* -
;YY- .
}YY/ 0
[[[ 	
Required[[	 
([[ 
ErrorMessage[[ 
=[[  
$str[[! ;
)[[; <
][[< =
public\\ 
decimal\\ 
?\\ 
Costo\\ 
{\\ 
get\\  #
;\\# $
set\\% (
;\\( )
}\\* +
[^^ 	
Required^^	 
(^^ 
ErrorMessage^^ 
=^^  
$str^^! F
)^^F G
]^^G H
public__ 
int__ 
?__ 
	IdReserva__ 
{__ 
get__  #
;__# $
set__% (
;__( )
}__* +
[aa 	

JsonIgnoreaa	 
]aa 
publicbb 
Reservabb 
?bb 
Reservabb 
{bb  !
getbb" %
;bb% &
setbb' *
;bb* +
}bb, -
}cc 
publicee 

classee 
Reservaee 
{ff 
[gg 	
Keygg	 
]gg 
publichh 
inthh 
?hh 
	IdReservahh 
{hh 
gethh  #
;hh# $
sethh% (
;hh( )
}hh* +
[ii 	
Requiredii	 
(ii 
ErrorMessageii 
=ii  
$strii! D
)iiD E
]iiE F
publicjj 
intjj 
?jj 
	IdClientejj 
{jj 
getjj  #
;jj# $
setjj% (
;jj( )
}jj* +
[ll 	

JsonIgnorell	 
]ll 
publicmm 
Clientemm 
?mm 
Clientemm 
{mm  !
getmm" %
;mm% &
setmm' *
;mm* +
}mm, -
[oo 	
Requiredoo	 
(oo 
ErrorMessageoo 
=oo  
$stroo! I
)ooI J
]ooJ K
publicpp 
intpp 
?pp 
IdHabitacionpp  
{pp! "
getpp# &
;pp& '
setpp( +
;pp+ ,
}pp- .
[rr 	

JsonIgnorerr	 
]rr 
publicss 

Habitacionss 
?ss 

Habitacionss %
{ss& '
getss( +
;ss+ ,
setss- 0
;ss0 1
}ss2 3
[uu 	
Requireduu	 
(uu 
ErrorMessageuu 
=uu  
$struu! ;
)uu; <
]uu< =
publicvv 
decimalvv 
?vv 
Costovv 
{vv 
getvv  #
;vv# $
setvv% (
;vv( )
}vv* +
[xx 	
Requiredxx	 
(xx 
ErrorMessagexx 
=xx  
$strxx! E
)xxE F
]xxF G
publicyy 
DateTimeyy 
?yy 
FechaInicioyy $
{yy% &
getyy' *
;yy* +
setyy, /
;yy/ 0
}yy1 2
[{{ 	
Required{{	 
({{ 
ErrorMessage{{ 
={{  
$str{{! B
){{B C
]{{C D
public|| 
DateTime|| 
?|| 
FechaFin|| !
{||" #
get||$ '
;||' (
set||) ,
;||, -
}||. /
[~~ 	

JsonIgnore~~	 
]~~ 
public 
ICollection 
< 
ServicioAdicional ,
>, - 
ServiciosAdicionales. B
{C D
getE H
;H I
setJ M
;M N
}O P
=Q R
newS V
ListW [
<[ \
ServicioAdicional\ m
>m n
(n o
)o p
;p q
}
ÄÄ 
}ÅÅ 